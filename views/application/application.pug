doctype html
html(lang="en")
head
  title 2020 Workshop Application
  include ../components/head.pug

include ../components/staticnav.pug

br
br

.container
    .row(style="text-align:center;")
        h1 2020 Workshop Application

        hr

        h5 #[b Information and Fee]

        ul
            li The workshop will be taught by Sh≈çichi Kitamura with enhanced attention by Professors Akira Takemoto and Keiko Hara.
            li The fee for the workshop is $550. If accepted, instructions for payment will follow.
            li Applicants will be notified of their status via email by March 2nd.

        hr

    if locals.open

        form(name="application" action="/application_2020" method="post" onsubmit="return validateApplication()")
            .row
                .six.columns
                    label Name
                    input.u-full-width(type="text" name="name")

                .six.columns
                    label E-Mail
                    input.u-full-width(type="text" name="email")
            .row
                .ten.columns
                    label Street Address
                    input.u-full-width(type="text" name="address")
            .row
                .six.columns
                    label City
                    input.u-full-width(type="text" name="city")

                .two.columns
                    label State
                    input.u-full-width(type="text" name="state")
                .four.columns
                    label Zip Code
                    input.u-full-width(type="text" name="zip")
            .row
                hr
                label Previous Experience
                p.
                    Please tell us about previous experiences in Mokuhanga or in Mokuhanga workshops that you have attended (where, when, primary instructor):
                textarea.u-full-width(type="text" style="height:40vh;" rows=10 name="experience")

                label Questions and Comments
                p.
                    If you have any questions or comments, please feel free to relay them below:
                textarea.u-full-width(type="text" style="height:40vh;" rows=10 name="questions")

            .row
                button.button-primary.u-full-width(type="submit" style="text-align:center;") Submit

    else
        .container
            .row(style="text-align:center;")
                h3 Application will open February 28th, 2020

script. 
    function validateApplication() {
        const application = document.forms.application
        let values = {}
        for (el of application) {
            values[el.name] = el.value
        }
        const { name, email, address, city, state, zip } = values

        const hasAddress = 
            address != "" &&
            city != "" &&
            state != "" &&
            zip  != ""
            
        const hasEmail = email != ""
        const hasValidEmail = email.includes("@")

        if (!hasValidEmail) { 
            alert("Please enter a valid email address.")
            return false
        }

        const hasName = name != ""
        const canContact = hasName && (hasEmail || hasAddress)
        
        if (canContact) {
            return true
        }
        
        else {
            alert("Please make sure you have completely filled out the form, including either an active mailing or email address.")
            return false
        }
    }